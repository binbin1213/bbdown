<Window xmlns="https://github.com/avaloniaui" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" x:Class="BBDown.GUI.MainWindow" Width="850" Height="650" Title="BBDown GUI" Icon="/Assets/logo.png" Padding="24">
  <Grid RowDefinitions="Auto,*,Auto" ColumnDefinitions="*" Margin="0">
    <Grid Grid.Row="0" RowDefinitions="Auto,Auto" ColumnDefinitions="80,*,100" Margin="0,4,0,0">
      <TextBlock Grid.Row="0" Text="URL" VerticalAlignment="Center"/>
      <TextBox Grid.Row="0" Name="UrlBox" Grid.Column="1" Margin="8,0"/>
      <ComboBox Grid.Row="0" Name="ApiTypeBox" Grid.Column="2" Margin="8,0,0,0" HorizontalAlignment="Stretch">
        <ComboBoxItem Content="WEB"/>
        <ComboBoxItem Content="TV"/>
        <ComboBoxItem Content="APP"/>
        <ComboBoxItem Content="INTL"/>
      </ComboBox>

      <TextBlock Grid.Row="1" Text="工作目录" VerticalAlignment="Center" Margin="0,8,0,0"/>
      <TextBox Grid.Row="1" Name="WorkDirBox" Grid.Column="1" Margin="8,8,0,0"/>
      <Button Grid.Row="1" Name="BrowseWorkDirButton" Grid.Column="2" Margin="8,8,0,0" HorizontalAlignment="Stretch">选择</Button>
    </Grid>

    <Grid Grid.Row="1" ColumnDefinitions="1*,1*" Margin="0,16,0,0" ClipToBounds="True">
      <TabControl Grid.Column="0">
        <TabItem Header="常规">
          <StackPanel Margin="0,8,0,0">
            <Border Classes="card">
              <StackPanel>
                <TextBlock Classes="card-title" Text="下载选项"/>
                <WrapPanel Orientation="Horizontal">
                  <CheckBox Name="OnlyInfoBox" Margin="0,0,12,0">
                    <TextBlock>
                      <Run Text="仅解析不下载 "/>
            
                    </TextBlock>
                  </CheckBox>
                  <CheckBox Name="MultiThreadBox" IsChecked="True" Margin="0,0,12,0">
                    <TextBlock>
                      <Run Text="多线程下载 "/>
            
                    </TextBlock>
                  </CheckBox>
                  <CheckBox Name="VideoOnlyBox" Margin="0,0,12,0">
                    <TextBlock>
                      <Run Text="仅视频 "/>
            
                    </TextBlock>
                  </CheckBox>
                  <CheckBox Name="AudioOnlyBox" Margin="0,0,12,0">
                    <TextBlock>
                      <Run Text="仅音频 "/>
            
                    </TextBlock>
                  </CheckBox>
                </WrapPanel>
              </StackPanel>
            </Border>
            <Border Classes="card">
              <StackPanel>
                <TextBlock Classes="card-title" Text="分P选择"/>
                <Grid ColumnDefinitions="80,*" RowDefinitions="Auto" Margin="0,4,0,0">
                  <TextBlock Grid.Row="0" Grid.Column="0" VerticalAlignment="Center">
                      <Run Text="分P "/>

                    <ToolTip.Tip>
                      B站视频通常包含多个部分, 称为“分P”。
                      在这里可以指定下载哪几个分P, 例如: 1,2,10 或 1-3。
                      “ALL”代表全部下载。
                    </ToolTip.Tip>
                  </TextBlock>
                  <TextBox Name="SelectPageBox" Grid.Row="0" Grid.Column="1" Watermark="如: 1,2,10 或 1-3 或 ALL"/>
                </Grid>
              </StackPanel>
            </Border>
            <Image Source="/Assets/logo.png" Height="200" Opacity="0.25" Margin="0,10,0,0" VerticalAlignment="Top"/>
          </StackPanel>
        </TabItem>
        <TabItem Header="下载">
          <StackPanel Margin="0,8,0,0">
            <Border Classes="card">
              <StackPanel Spacing="4">
                <TextBlock Classes="card-title" Text="下载方式"/>
                <StackPanel Orientation="Horizontal" Spacing="12">
                  <CheckBox Name="UseAria2cBox">
                    <TextBlock>
                      <Run Text="使用 aria2c "/>

                    </TextBlock>
                  </CheckBox>
                </StackPanel>
                <Grid ColumnDefinitions="100,*" Margin="0">
                  <TextBlock VerticalAlignment="Center">
                    <Run Text="aria2c 参数"/>
                  </TextBlock>
                  <TextBox Name="Aria2cArgsBox" Grid.Column="1" Watermark="默认: -x16 -s16 -j16 -k 5M"/>
                </Grid>
              </StackPanel>
            </Border>
            <Border Classes="card">
              <StackPanel Spacing="4">
                <TextBlock Classes="card-title" Text="混流"/>
                <StackPanel Orientation="Horizontal" Spacing="12">
                  <CheckBox Name="UseMP4boxBox">
                    <TextBlock>
                      <Run Text="使用 MP4Box "/>

                    </TextBlock>
                  </CheckBox>
                  <CheckBox Name="SimplyMuxBox">
                    <TextBlock>
                      <Run Text="精简混流 "/>

                    </TextBlock>
                  </CheckBox>
                  <CheckBox Name="SkipMuxBox">
                    <TextBlock>
                      <Run Text="跳过混流 "/>

                    </TextBlock>
                  </CheckBox>
                </StackPanel>
              </StackPanel>
            </Border>
            <Border Classes="card">
              <StackPanel Spacing="4">
                <TextBlock Classes="card-title" Text="内容选择"/>
                <StackPanel Orientation="Horizontal" Spacing="12">
                  <CheckBox Name="DanmakuOnlyBox">
                    <TextBlock>
                      <Run Text="仅弹幕 "/>

                    </TextBlock>
                  </CheckBox>
                  <CheckBox Name="CoverOnlyBox">
                    <TextBlock>
                      <Run Text="仅封面 "/>

                    </TextBlock>
                  </CheckBox>
                  <CheckBox Name="SubOnlyBox">
                    <TextBlock>
                      <Run Text="仅字幕 "/>

                    </TextBlock>
                  </CheckBox>
                  <CheckBox Name="SkipCoverBox">
                    <TextBlock>
                      <Run Text="跳过封面 "/>
            
                    </TextBlock>
                  </CheckBox>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Spacing="12" Margin="0">
                  <CheckBox Name="DownloadDanmakuBox">
                    <TextBlock>
                      <Run Text="下载弹幕 "/>

                    </TextBlock>
                  </CheckBox>
                  <CheckBox Name="SkipSubtitleBox">
                    <TextBlock>
                      <Run Text="跳过字幕 "/>

                    </TextBlock>
                  </CheckBox>
                  <CheckBox Name="SkipAiBox">
                    <TextBlock>
                      <Run Text="跳过 AI 字幕 "/>

                    </TextBlock>
                  </CheckBox>
                </StackPanel>
                <Grid ColumnDefinitions="100,*" Margin="0">
                  <TextBlock VerticalAlignment="Center">
                    <Run Text="弹幕格式"/>
                  </TextBlock>
                  <TextBox Name="DanmakuFormatsBox" Grid.Column="1" Watermark="xml,ass"/>
                </Grid>
              </StackPanel>
            </Border>
          </StackPanel>
        </TabItem>
        <TabItem Header="网络">
          <StackPanel Margin="0,8,0,0">
            <Border Classes="card">
              <StackPanel>
                <TextBlock Classes="card-title" Text="身份认证"/>
                <Grid ColumnDefinitions="100,*,Auto" RowDefinitions="Auto,Auto" Margin="0,4,0,0">
                  <TextBlock Grid.Row="0" Grid.Column="0" VerticalAlignment="Center">
                    <Run Text="Cookie "/>
                  </TextBlock>
                  <TextBox Name="CookieBox" Grid.Row="0" Grid.Column="1"/>
                  <Button Name="LoginWebButton" Grid.Row="0" Grid.Column="2" Margin="8,0,0,0" Click="LoginWeb_Click">网页端登录</Button>
                  
                  <TextBlock Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" Margin="0,8,0,0">
                    <Run Text="AccessToken "/>
                  </TextBlock>
                  <TextBox Name="TokenBox" Grid.Row="1" Grid.Column="1" Margin="0,8,0,0"/>
                  <Button Name="LoginTVButton" Grid.Row="1" Grid.Column="2" Margin="8,8,0,0" Click="LoginTV_Click">TV端登录</Button>
                </Grid>

                <Grid Name="QrCodePanel" IsVisible="False" Margin="0,16,0,0" RowDefinitions="Auto,Auto">
                    <Image Name="QrCodeImage" Width="200" Height="200" HorizontalAlignment="Center"/>
                    <TextBlock Name="QrCodeStatusLabel" Grid.Row="1" HorizontalAlignment="Center" Margin="0,8,0,0" Text="请使用 Bilibili App 扫码登录"/>
                </Grid>
              </StackPanel>
            </Border>
          </StackPanel>
        </TabItem>
      </TabControl>

      <Grid Grid.Column="1" RowDefinitions="Auto,*" Margin="12,0,0,0">
        <StackPanel Orientation="Horizontal" Spacing="12">
          <Button Name="StartButton" Width="160" Classes="primary">开始</Button>
          <Button Name="StopButton" Width="120" Classes="danger">停止</Button>
        </StackPanel>
        <TextBox Name="LogBox" Grid.Row="1" Classes="log-box" MinHeight="200" AcceptsReturn="True" ScrollViewer.VerticalScrollBarVisibility="Auto" ScrollViewer.HorizontalScrollBarVisibility="Auto" IsReadOnly="True" FontFamily="Menlo,Consolas" TextWrapping="Wrap" VerticalAlignment="Stretch" Margin="0,12,0,0"/>
      </Grid>
    </Grid>

    <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,20,0,0" Spacing="8">
      <TextBlock Text="提示: 已自动启用最高画质预设。" Opacity="0.7" FontSize="12" VerticalAlignment="Center" Padding="0,2,0,0"/>
    </StackPanel>
  </Grid>
</Window>